(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d994b66"],{5807:function(t,e,r){},"88f4":function(t,e,r){"use strict";var s=r("5807"),a=r.n(s);a.a},"99af":function(t,e,r){"use strict";var s=r("23e7"),a=r("d039"),n=r("e8b5"),i=r("861d"),o=r("7b0b"),c=r("50c4"),l=r("8418"),u=r("65f0"),d=r("1dde"),v=r("b622"),m=r("60ae"),p=v("isConcatSpreadable"),g=9007199254740991,h="Maximum allowed index exceeded",f=m>=51||!a((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),w=d("concat"),b=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:n(t)},_=!f||!w;s({target:"Array",proto:!0,forced:_},{concat:function(t){var e,r,s,a,n,i=o(this),d=u(i,0),v=0;for(e=-1,s=arguments.length;e<s;e++)if(n=-1===e?i:arguments[e],b(n)){if(a=c(n.length),v+a>g)throw TypeError(h);for(r=0;r<a;r++,v++)r in n&&l(d,v,n[r])}else{if(v>=g)throw TypeError(h);l(d,v++,n)}return d.length=v,d}})},f7b1:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticStyle:{margin:"90px 70px 0px 70px"}},[t.isLoaded?r("p",{staticClass:"col-md-6",staticStyle:{top:"0px",margin:"0px",padding:"0"},on:{load:t.loaded}},[t._v(" 카테고리 > "+t._s(t._f("parent_category")(t.product.parent_category))+" "),t.child_category?r("span",[t._v(" > ")]):t._e(),t._v(" "+t._s(t.child_category)+" ")]):t._e()]),r("div",{staticClass:"site-section mt-5 product"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-6"},[r("div",{staticClass:"owl-style",staticStyle:{"text-align":"center"}},[r("img",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"img-fluid",staticStyle:{width:"60%",height:"60%"},attrs:{src:""+t.productPath,alt:"Image"},on:{load:t.loaded}})])]),r("div",{staticClass:"col-lg-5 ml-auto"},[r("h3",{staticClass:"text-primary"},[t._v(t._s(t.product.product_name))]),r("h3",[t._v("제조사: Now Foods")])])]),r("hr"),r("div",{staticClass:"border"},[t._m(0),r("hr"),r("div",{staticClass:"row ",staticStyle:{"padding-left":"1rem"}},[r("div",{staticClass:"col-lg-6"},[r("strong",{staticClass:"headings"},[t._v("제품설명")]),r("p",[t._v(t._s(t.product.product_desc))])]),r("div",{staticClass:"panel panel-default col-lg-5 ml-auto",staticStyle:{"margin-right":"1rem"}},[r("div",{staticClass:"panel-heading"}),r("table",{staticClass:"table con-log-5"},[t._m(1),t._m(2),r("tr",[r("td",[t._v(" "+t._s(t.product.servings)+" ")]),r("td"),r("td"),r("td",[t._v(" "+t._s(t.product.total_servings)+"회")]),r("td")]),t._m(3),t._l(t.product.ingredients,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.ingredient))]),r("td"),r("td"),r("td",[t._v(t._s(e.per_serving))]),r("td",[t._v(t._s(e.daily_value)),e.daily_value?r("span",[t._v("%")]):t._e()])])})),t._m(4)],2)]),r("div",{staticClass:"col-lg-6"},[r("div",{staticStyle:{"margin-top":"1em"}},[r("strong",{staticClass:"headings"},[t._v("복용법")]),r("p",[t._v(" "+t._s(t.product.suggested_use)+" ")])]),r("div",{staticStyle:{"margin-top":"1em","margin-botom":"0px"}},[r("strong",{staticClass:"headings"},[t._v("기타 성분")]),r("p",{staticStyle:{"margin-top":"0px"}},[t._v(" "+t._s(t.product.other_ingredients)+" ")])]),r("div",{staticStyle:{"margin-top":"1em","margin-botom":"0px"}},[r("strong",{staticClass:"headings"},[t._v("주의 사항")]),r("p",{staticStyle:{"margin-top":"0px"}},[t._v(" "+t._s(t.product.warnings))])]),r("div",t._l(t.product.pictograms,(function(e){return r("img",{key:e.id,staticStyle:{width:"80px"},attrs:{src:t.pictogramPath+"/"+e.image_path}})})),0)])])]),r("reviewList",{key:t.componentKey})],1)])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-left":"1em","margin-top":"1em"}},[r("h4",{staticStyle:{"font-weight":"900",color:"#3d3935"}},[t._v("제품 상세")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{staticClass:"teble-color"},[r("th",{staticClass:"in-table"},[r("strong",[t._v("영양성분표")])]),r("th"),r("th"),r("th"),r("th")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("th",{staticClass:"in-table"},[t._v("1회분량")]),r("th"),r("th"),r("th",{staticClass:"in-table"},[t._v("전체분량")]),r("th")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{staticClass:"teble-color"},[r("th",{staticClass:"in-table"},[t._v("성분명")]),r("th"),r("th"),r("th",{staticClass:"in-table"},[t._v("함유량")]),r("th",{staticClass:"in-table"},[t._v("%영양소기준치")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td"),r("td"),r("td"),r("td"),r("td")])}],n=(r("a4d3"),r("99af"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),i=(r("96cf"),r("1da1")),o=r("2f62"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"border",staticStyle:{"margin-top":"20px"}},[t._m(0),r("hr"),t.getloginState?r("div",{staticClass:"form-group",staticStyle:{border:"1px solid lightgray"}},[r("div",{staticClass:"text-center"},[r("span",[t._v("제품 평가를 남겨주세요(최대 300자까지 가능합니다). ")]),r("div",{staticClass:"text-center"},[r("span",{staticClass:"col-lg-2 font-weight-bold"},[t._v("리뷰제목")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.review.title,expression:"review.title"}],ref:"reviewTitle",staticClass:"form-control col-lg-12",attrs:{type:"text",maxlength:"100"},domProps:{value:t.review.title},on:{input:function(e){e.target.composing||t.$set(t.review,"title",e.target.value)}}})]),r("label",{attrs:{for:"comment"}},[r("span",{staticClass:"font-weight-bold"},[t._v("리뷰")]),t._v("(글자수 "),r("span",{staticStyle:{"margin-left":"0.5rem"}},[t._v(t._s(t.review.contents.length)+"/300)")])])]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.review.contents,expression:"review.contents"}],ref:"reviewContents",staticClass:"form-control",attrs:{rows:"5",id:"review",maxlength:"300",placeholder:"최대 300자까지 작성하실 수 있습니다."},domProps:{value:t.review.contents},on:{input:function(e){e.target.composing||t.$set(t.review,"contents",e.target.value)}}}),r("div",{staticClass:"text-right",staticStyle:{higth:"200px"}},[r("button",{staticClass:"btn btn-info btn-xl",attrs:{type:"button"},on:{click:t.write}},[t._v("등록")])])]):r("div",{staticClass:"form-group",staticStyle:{border:"1px solid lightgray"}},[r("router-link",{attrs:{to:{name:"login"}}},[r("div",{staticClass:"text-center"},[r("label",{staticClass:"text-danger font-weight-bold h5"},[t._v("회원만 제품 리뷰를 작성하실 수 있습니다.")])]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.review.contents,expression:"review.contents"}],ref:"reviewContents",staticClass:"form-control",attrs:{rows:"5",id:"review",maxlength:"300",placeholder:"로그인 해주세요."},domProps:{value:t.review.contents},on:{input:function(e){e.target.composing||t.$set(t.review,"contents",e.target.value)}}})])],1),r("div",{staticClass:"container"},[r("h2",{staticClass:"text-center"},[t._v(" "+t._s(t.reviewLength)+" ")]),t._l(t.reviewList,(function(e,s){return r("div",{key:e.id,ref:"review",refInFor:!0,staticClass:"card reviewList"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-2 text-center"},[r("h1",[t._v(t._s(e.id))]),r("img",{staticClass:"img rounded-circle img-fluid",attrs:{src:"/assets/images/profile-picture.png"}}),r("p",{staticClass:"text-secondary text-center"},[r("span",[t._v("회원:")]),t._v(t._s(e.user.user_id))])]),r("div",{staticClass:"col-md-10"},[r("p"),r("h3",{staticClass:"text-dark font-weight-bold"},[t._v(t._s(e.title))]),r("span",[t._v(t._s(e.createdAt))]),r("div",{staticClass:"clearfix"}),r("p",{staticClass:"text-dark font-weight-bolder"},[t._v(t._s(e.contents))]),r("p",[r("button",{staticClass:"float-right btn btn-outline-primary ml-2",on:{click:function(r){return t.isVisible(s,e.id)}}},[r("i",{staticClass:"fa fa-reply"}),t._v(" 댓글 ")]),e.userId===t.id&&t.getloginState?r("button",{staticClass:"float-right btn btn-outline-danger ml-2",on:{click:function(r){return t.deleteReview(e.id)}}},[r("i",{staticClass:"fa fa-trash-alt"}),t._v(" 삭제 ")]):t._e()])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"review.isShow"}],staticClass:"card"},[t.getloginState?r("div",{staticClass:"form-group border"},[t._m(1,!0),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentArr[s],expression:"commentArr[idx]"}],ref:"comment",refInFor:!0,staticClass:"form-control",attrs:{rows:"5",maxlength:"300",placeholder:"최대 300자까지 작성하실 수 있습니다."},domProps:{value:t.commentArr[s]},on:{input:function(e){e.target.composing||t.$set(t.commentArr,s,e.target.value)}}}),r("div",{staticClass:"text-right",staticStyle:{higth:"200px"}},[r("button",{staticClass:"btn btn-secondary btn-xl",attrs:{type:"button"},on:{click:function(r){return t.reply(e.id,s)}}},[t._v("댓글등록")])])]):r("div",{staticClass:"form-group border"},[r("router-link",{attrs:{to:{name:"login"}}},[r("div",{staticClass:"text-center"},[r("label",{staticClass:"text-danger font-weight-bold h6"},[t._v("회원만 댓글을 작성하실 수 있습니다.")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentArr[s],expression:"commentArr[idx]"}],ref:"comment",refInFor:!0,staticClass:"form-control",attrs:{rows:"5",maxlength:"300",placeholder:"로그인해주세요"},domProps:{value:t.commentArr[s]},on:{input:function(e){e.target.composing||t.$set(t.commentArr,s,e.target.value)}}})])])],1),r("h4",{staticClass:"text-center font-bolder text-body"},[t._v(t._s(e.commentLength))]),t._l(e.comments,(function(a){return r("div",{key:a.id,staticClass:"card-body border"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("p",[r("span",[t._v(t._s(a.createdAt))]),e.userId===a.userId?r("button",{staticClass:"btn btn-outline-info btn-sm pull-right",attrs:{type:"button",disabled:""}},[t._v("작성자댓글")]):t._e(),r("label",{staticClass:"pull-right",staticStyle:{"margin-right":"0.3rem"}},[t._v("회원: "+t._s(a.user.user_id)+" ")])]),r("div",{staticClass:"clearfix"}),r("p",{staticClass:"text-dark font-weight-bolder"},[t._v(t._s(a.contents))]),r("p",[t.id===a.userId&&t.getloginState?r("button",{staticClass:"float-right btn btn-outline-danger ml-2",on:{click:function(r){return t.deleteComment(a.id,s,e.id)}}},[r("i",{staticClass:"fas fa-trash-alt"}),t._v(" 삭제 ")]):t._e()])])])])}))],2)])])}))],2)])},l=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-left":"1em","margin-top":"1em"}},[r("h4",{staticStyle:{"font-weight":"900",color:"#3d3935"}},[t._v("제품 리뷰")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("span",[t._v("댓글 작성(최대 300자까지 작성하실 수 있습니다). ")])])}],u=r("c0d6");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var m={name:"reviewList",data:function(){return{reviewLength:"",reviewList:[],review:{title:"",contents:"",userId:"",productId:this.$route.params},comment:{contents:"",userId:"",reviewId:""},commentArr:[]}},methods:{isVisible:function(t,e){var r=this;if(console.log("review의 id",e),console.log("v-if의 인덱스 확인. class의 인덱스와 일치하는지 확인",t),this.reviewList[t].isShow)return this.reviewList[t].isShow=!1,this.$forceUpdate(),!1;this.reviewList[t].isShow||(this.reviewList[t].isShow=!0,this.$forceUpdate(),Object(i["a"])(regeneratorRuntime.mark((function s(){var a,n,i,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,r.$axios.get("".concat(r.url,"/reviews/comments?review_id=").concat(e));case 3:a=s.sent,console.log("가져온 댓글",a.data),n=a.data,i=n.code,o=n.message,200===i?(r.reviewList[t].comments=a.data.result,r.reviewList[t].comments.length>0?r.reviewList[t].commentLength="":r.reviewList[t].commentLength="댓글이 없습니다.",r.$forceUpdate()):alert(o),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0);case 12:case"end":return s.stop()}}),s,null,[[0,9]])})))())},checkReview:function(){return this.review.title?!!this.review.contents||(alert("리뷰 내용을 입력해 주세요."),this.$refs.reviewContents.focus(),!1):(alert("리뷰 제목을 입력해 주세요."),this.$refs.reviewTitle.focus(),!1)},resetReview:function(){this.review.title="",this.review.contents=""},auth:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].dispatch("auth");case 2:if(u["a"].getters.auth){e.next=8;break}return alert("로그인 되어있지 않습니다. 다시 로그인 해주세요."),t.resetReview(),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})))()},write:function(){var t=this,e=this.checkReview();if(!e)return!1;Object(i["a"])(regeneratorRuntime.mark((function e(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.auth();case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return",!1);case 5:return console.log("reviw:글 작성시 id확인",t.id),t.review.userId=t.id,e.next=9,t.$axios.post("".concat(t.url,"/reviews/"),t.review);case 9:s=e.sent,console.log("review:리뷰 작성 응답",s),a=s.data,n=a.code,i=a.message,201===n?(t.reviewList=s.data.result,console.log("review:바뀐 리스트 확인",t.reviewList),t.reviewList.forEach((function(t){t.isShow=!1,t.commentLength=""})),t.resetReview(),t.$forceUpdate()):alert(i);case 13:case"end":return e.stop()}}),e)})))()},deleteReview:function(t){var e=this,r=confirm("삭제하시겠습니까?");if(!r)return!1;Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a,n,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.auth();case 3:if(s=r.sent,s){r.next=6;break}return r.abrupt("return",!1);case 6:if(!s){r.next=13;break}return r.next=9,e.$axios.delete("".concat(e.url,"/reviews/delete/").concat(e.$route.params.id,"/").concat(t));case 9:a=r.sent,n=a.data,i=n.code,o=n.message,console.log("삭제후",a),200===i?e.reviewList=a.data.result:alert(o);case 13:r.next=18;break;case 15:r.prev=15,r.t0=r["catch"](0),console.log(r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,15]])})))()},reply:function(t,e){var r=this;if(!this.commentArr[e])return alert("댓글을 입력해주세요"),this.$refs.comment[e].focus(),!1;Object(i["a"])(regeneratorRuntime.mark((function s(){var a,n,i,o,c,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,r.auth();case 3:if(a=s.sent,a){s.next=9;break}return console.log("댓글달려했는데 로그인x",r.commentArr[e]),r.commentArr[e]="",r.$forceUpdate(),s.abrupt("return",!1);case 9:return r.comment.reviewId=t,r.comment.userId=r.id,r.comment.contents=r.commentArr[e],s.next=14,r.$axios.post("".concat(r.url,"/reviews/comments"),r.comment);case 14:n=s.sent,i=n.data,o=i.code,c=i.message,l=i.result,201===o?(r.reviewList[e].comments=l,r.commentArr[e]="",r.reviewList[e].commentLength="",r.$forceUpdate()):alert(c),s.next=22;break;case 19:s.prev=19,s.t0=s["catch"](0),console.log(s.t0);case 22:case"end":return s.stop()}}),s,null,[[0,19]])})))()},deleteComment:function(t,e,r){var s=this,a=confirm("삭제하시겠습니까?");if(!a)return!1;Object(i["a"])(regeneratorRuntime.mark((function a(){var n,i,o,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.auth();case 3:if(n=a.sent,n){a.next=6;break}return a.abrupt("return",!1);case 6:return a.next=8,s.$axios.delete("".concat(s.url,"/reviews/deleteComment/").concat(r,"/").concat(t));case 8:i=a.sent,console.log(i),o=i.data,c=o.code,l=o.message,200===c?s.reviewList[e].comments=i.data.result:alert(l),s.$forceUpdate(),a.next=18;break;case 15:a.prev=15,a.t0=a["catch"](0),console.log(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,15]])})))()}},computed:v({},Object(o["c"])(["id","userId","url"]),{},Object(o["b"])(["getloginState"])),created:function(){var t=this;Object(i["a"])(regeneratorRuntime.mark((function e(){var r,s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("".concat(t.url,"/reviews?productId=").concat(t.$route.params.id));case 3:r=e.sent,console.log("리뷰리스트",r.data),s=r.data,a=s.code,n=s.message,200===a?(t.reviewList=r.data.result,t.reviewList.length<1?t.reviewLength="리뷰가 없습니다.":t.reviewLength="",t.reviewList.forEach((function(t){t.isShow=!1,t.commentLength=""}))):alert(n),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}},p=m,g=r("2877"),h=Object(g["a"])(p,c,l,!1,null,null,null),f=h.exports;function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _={name:"ProductDetail",data:function(){return{componentKey:0,product:{},isLoaded:!1,rate:""}},methods:{forceRerender:function(){this.componentKey+=1},loaded:function(){this.isLoaded=!0}},components:{reviewList:f},created:function(){var t=this;Object(i["a"])(regeneratorRuntime.mark((function e(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("".concat(t.url,"/products/").concat(t.$route.params.id));case 3:r=e.sent,console.log("단일 제품 결과",r),s=r.data,a=s.code,n=s.message,i=s.product,200===a?t.product=i:alert(n),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},mounted:function(){},filters:{parent_category:function(t){return 1===t?"영양제":"동물영양제"}},computed:b({},Object(o["c"])(["isLogin","id","userId","url"]),{},Object(o["b"])(["productImagePath","pictogramPath"]),{child_category:function(){return 1==this.product.parent_category?1==this.product.child_category?"비타민":"프로바이오틱스":null},productPath:function(){var t="".concat(this.productImagePath,"/").concat(this.product.product_image);return t}})},x=_,C=(r("88f4"),Object(g["a"])(x,s,a,!1,null,null,null));e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-1d994b66.88f5927e.js.map