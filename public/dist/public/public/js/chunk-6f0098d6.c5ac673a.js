(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f0098d6"],{5807:function(t,e,s){},"88f4":function(t,e,s){"use strict";var r=s("5807"),a=s.n(r);a.a},"99af":function(t,e,s){"use strict";var r=s("23e7"),a=s("d039"),i=s("e8b5"),n=s("861d"),o=s("7b0b"),c=s("50c4"),l=s("8418"),d=s("65f0"),u=s("1dde"),v=s("b622"),p=s("60ae"),g=v("isConcatSpreadable"),f=9007199254740991,m="Maximum allowed index exceeded",h=p>=51||!a((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),_=u("concat"),b=function(t){if(!n(t))return!1;var e=t[g];return void 0!==e?!!e:i(t)},w=!h||!_;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,s,r,a,i,n=o(this),u=d(n,0),v=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?n:arguments[e],b(i)){if(a=c(i.length),v+a>f)throw TypeError(m);for(s=0;s<a;s++,v++)s in i&&l(u,v,i[s])}else{if(v>=f)throw TypeError(m);l(u,v++,i)}return u.length=v,u}})},a434:function(t,e,s){"use strict";var r=s("23e7"),a=s("23cb"),i=s("a691"),n=s("50c4"),o=s("7b0b"),c=s("65f0"),l=s("8418"),d=s("1dde"),u=Math.max,v=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d("splice")},{splice:function(t,e){var s,r,d,f,m,h,_=o(this),b=n(_.length),w=a(t,b),C=arguments.length;if(0===C?s=r=0:1===C?(s=0,r=b-w):(s=C-2,r=v(u(i(e),0),b-w)),b+s-r>p)throw TypeError(g);for(d=c(_,r),f=0;f<r;f++)m=w+f,m in _&&l(d,f,_[m]);if(d.length=r,s<r){for(f=w;f<b-r;f++)m=f+r,h=f+s,m in _?_[h]=_[m]:delete _[h];for(f=b;f>b-r+s;f--)delete _[f-1]}else if(s>r)for(f=b-r;f>w;f--)m=f+r-1,h=f+s-1,m in _?_[h]=_[m]:delete _[h];for(f=0;f<s;f++)_[f+w]=arguments[f+2];return _.length=b-r+s,d}})},f7b1:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticStyle:{margin:"80px 70px 0px 70px"}},[t.isLoaded?s("p",{staticClass:"col-md-6",staticStyle:{top:"0px",margin:"0px",padding:"0"},on:{load:t.loaded}},[t._v(" 카테고리 > "+t._s(t._f("parent_category")(t.product.parent_category))+" "),t.child_category?s("span",[t._v(" > ")]):t._e(),t._v(" "+t._s(t.child_category)+" ")]):t._e()]),s("div",{staticClass:"site-section mt-5 product"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6"},[s("div",{staticClass:"owl-style",staticStyle:{"text-align":"center"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"img-fluid",staticStyle:{width:"60%",height:"60%"},attrs:{src:""+t.productPath,alt:"Image"},on:{load:t.loaded}})])]),s("div",{staticClass:"col-lg-5 ml-auto"},[s("h3",{staticClass:"text-primary"},[t._v(t._s(t.product.product_name))]),s("h3",[t._v("제조사: Now Foods")])])]),s("hr"),s("div",{staticClass:"border"},[t._m(0),s("hr"),s("div",{staticClass:"row ",staticStyle:{"padding-left":"1rem"}},[s("div",{staticClass:"col-lg-6"},[s("strong",{staticClass:"headings"},[t._v("제품설명")]),s("p",[t._v(t._s(t.product.product_desc))])]),s("div",{staticClass:"panel panel-default col-lg-5 ml-auto",staticStyle:{"margin-right":"1rem"}},[s("div",{staticClass:"panel-heading"}),s("table",{staticClass:"table con-log-5"},[t._m(1),t._m(2),s("tr",[s("td",[t._v(" "+t._s(t.product.servings)+" ")]),s("td"),s("td"),s("td",[t._v(" "+t._s(t.product.total_servings)+"회")]),s("td")]),t._m(3),t._l(t.product.ingredients,(function(e,r){return s("tr",{key:r},[s("td",[t._v(t._s(e.ingredient))]),s("td"),s("td"),s("td",[t._v(t._s(e.per_serving))]),s("td",[t._v(t._s(e.daily_value))])])})),t._m(4)],2)]),s("div",{staticClass:"col-lg-6"},[s("div",{staticStyle:{"margin-top":"1em"}},[s("strong",{staticClass:"headings"},[t._v("복용법")]),s("p",[t._v(" "+t._s(t.product.suggested_use)+" ")])]),s("div",{staticStyle:{"margin-top":"1em","margin-botom":"0px"}},[s("strong",{staticClass:"headings"},[t._v("기타 성분")]),s("p",{staticStyle:{"margin-top":"0px"}},[t._v(" "+t._s(t.product.other_ingredients)+" ")])]),s("div",{staticStyle:{"margin-top":"1em","margin-botom":"0px"}},[s("strong",{staticClass:"headings"},[t._v("주의 사항")]),s("p",{staticStyle:{"margin-top":"0px"}},[t._v(" "+t._s(t.product.warnings))])]),s("div",t._l(t.product.pictograms,(function(e,r){return s("img",{key:r,staticStyle:{width:"80px"},attrs:{src:t.pictogramPath+"/"+e.image_path}})})),0)])])]),s("div",{staticClass:"border",staticStyle:{"margin-top":"20px"}},[t._m(5),s("hr"),t.token?s("div",{staticClass:"form-group",staticStyle:{border:"1px solid lightgray"}},[s("div",{staticClass:"text-center"},[s("span",[t._v("제품 평가를 남겨주세요(최대 300자까지 가능합니다). ")]),s("div",{staticClass:"text-center"},[s("span",{staticClass:"col-lg-2 font-weight-bold"},[t._v("리뷰제목")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.review.title,expression:"review.title"}],ref:"reviewTitle",staticClass:"form-control col-lg-12",attrs:{type:"text"},domProps:{value:t.review.title},on:{input:function(e){e.target.composing||t.$set(t.review,"title",e.target.value)}}})]),s("label",{attrs:{for:"comment"}},[s("span",{staticClass:"font-weight-bold"},[t._v("글내용")]),t._v("(글자수 "),s("span",{staticStyle:{"margin-left":"0.5rem"}},[t._v(t._s(t.review.contents.length)+"/300)")])])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.review.contents,expression:"review.contents"}],ref:"reviewContents",staticClass:"form-control",attrs:{rows:"5",id:"comment",maxlength:"300",placeholder:"최대 300까지 작성하실 수 있습니다."},domProps:{value:t.review.contents},on:{input:function(e){e.target.composing||t.$set(t.review,"contents",e.target.value)}}}),s("div",{staticClass:"text-right",staticStyle:{higth:"200px"}},[s("button",{staticClass:"btn btn-info btn-xl",attrs:{type:"button"},on:{click:t.write}},[t._v("등록")])])]):t._e(),t.token?t._e():s("div",{staticClass:"text-center col-lg-12"},[s("router-link",{staticClass:"text-danger font-weight-bold font",staticStyle:{"font-size":"1rem"},attrs:{to:{name:"login"}}},[t._v(" 회원만 제품 리뷰를 작성하실 수 있습니다. ")]),s("hr",{staticClass:"divider"})],1),s("div",{staticClass:"container"},[t.reviewList.length<1?s("h2",{staticClass:"text-center"},[t._v(" 리뷰가 없습니다.")]):t._e(),t._l(t.reviewList,(function(e,r){return s("div",{key:e.id,ref:"list",refInFor:!0,staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-2"},[s("img",{staticClass:"img img-rounded img-fluid",attrs:{src:"https://image.ibb.co/jw55Ex/def_face.jpg"}}),s("p",{staticClass:"text-secondary text-center"},[t._v(t._s(e.user_id))])]),s("div",{staticClass:"col-md-10"},[s("p"),s("h3",{staticClass:"text-dark font-weight-bold"},[t._v(t._s(e.title))]),s("span",[t._v(t._s(e.createdAt))]),s("div",{staticClass:"clearfix"}),s("p",{staticClass:"text-dark font-weight-bolder"},[t._v(t._s(e.contents))]),s("p",[s("button",{staticClass:"float-right btn btn-outline-primary ml-2",on:{click:function(e){return t.isVisible(r)}}},[s("i",{staticClass:"fa fa-reply"}),t._v(" 댓글 ")]),s("button",{staticClass:"float-right btn btn-outline-danger ml-2",on:{click:function(s){return t.deleteReview(e.id,r)}}},[s("i",{staticClass:"fa fa-trash-alt"}),t._v(" 삭제 ")])])])]),s("div",{ref:"test",refInFor:!0,staticClass:"card",class:{visible:!0}},[t.token?s("div",{staticClass:"form-group",staticStyle:{border:"1px solid lightgray"}},[t._m(6,!0),s("textarea",{ref:"comment",refInFor:!0,staticClass:"form-control",attrs:{rows:"5",id:"comment",maxlength:"300",placeholder:"최대 300까지 작성하실 수 있습니다."}}),s("div",{staticClass:"text-right",staticStyle:{higth:"200px"}},[s("button",{staticClass:"btn btn-secondary btn-xl",attrs:{type:"button"},on:{click:function(s){return t.reply(e.id,r)}}},[t._v("댓글등록")])])]):t._e(),e.comments.length<1?s("h4",{staticClass:"text-center font-bolder text-body"},[t._v("댓글이 없습니다")]):t._e(),t._l(e.comments,(function(e,r){return s("div",{key:r,staticClass:"card-body border"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("p",[s("span",[t._v(t._s(e.createdAt))])]),s("div",{staticClass:"clearfix"}),s("p",{staticClass:"text-dark font-weight-bolder"},[t._v(t._s(e.contents))]),s("p",[t.id===e.userId&&t.token?s("button",{staticClass:"float-right btn btn-outline-warning ml-2"},[s("i",{staticClass:"fas fa-pencil-alt"}),t._v(" 수정 ")]):t._e(),t.id===e.userId&&t.token?s("button",{staticClass:"float-right btn btn-outline-danger ml-2"},[s("i",{staticClass:"fas fa-trash-alt"}),t._v(" 삭제 ")]):t._e()])])])])}))],2)])])}))],2)])])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"margin-left":"1em","margin-top":"1em"}},[s("h4",{staticStyle:{"font-weight":"900",color:"#3d3935"}},[t._v("제품 상세")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"teble-color"},[s("th",{staticClass:"in-table"},[s("strong",[t._v("영양성분표")])]),s("th"),s("th"),s("th"),s("th")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",{staticClass:"in-table"},[t._v("1회분량")]),s("th"),s("th"),s("th",{staticClass:"in-table"},[t._v("전체분량")]),s("th")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"teble-color"},[s("th",{staticClass:"in-table"},[t._v("1회 분량당")]),s("th"),s("th"),s("th",{staticClass:"in-table"},[t._v("함량")]),s("th",{staticClass:"in-table"},[t._v("%영양소기준치")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td"),s("td"),s("td"),s("td"),s("td")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"margin-left":"1em","margin-top":"1em"}},[s("h4",{staticStyle:{"font-weight":"900",color:"#3d3935"}},[t._v("제품 리뷰")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("span",[t._v("댓글 작성(최대 300자까지 가능합니다). ")])])}],i=(s("a4d3"),s("99af"),s("4de4"),s("a434"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),n=(s("96cf"),s("1da1")),o=s("2f62");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"ProductDetail",data:function(){return{product:{},review:{title:"",contents:"",userId:"",productId:this.$route.params},comment:{contents:"",userId:"",reviewId:""},isLoaded:!1,rate:"",reviewList:[],reviewAdd:0}},methods:{loaded:function(){this.isLoaded=!0},isVisible:function(t){console.log("몇번째요소?"),console.log(t),this.$refs.test[t].style.display?this.$refs.test[t].style.display="":this.$refs.test[t].style.display="block"},write:function(){var t=this;Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.review.title){e.next=6;break}return alert("리뷰 제목을 입력해 주세요."),t.$refs.reviewTitle.focus(),e.abrupt("return",!1);case 6:if(t.review.contents){e.next=10;break}return alert("리뷰 내용을 입력해 주세요."),t.$refs.reviewContents.focus(),e.abrupt("return",!1);case 10:return e.prev=10,e.next=13,t.$axios.post("".concat(t.url,"/reviews/"),t.review);case 13:s=e.sent,console.log(s),console.log("요청보냄"),r=s.data,a=r.code,i=r.message,201===a?(t.reviewList.splice(0,0,s.data.result),console.log("리스트 바뀌나?"),console.log(t.reviewList)):alert(i),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](10),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[10,20]])})))()},deleteReview:function(t,e){var s=this;Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:s.reviewList.splice(e,1);try{a=s.$axios.delete("".concat(s.url,"/reviews/delete?review_id=").concat(t)),console.log(a)}catch(i){console.log(i)}case 2:case"end":return r.stop()}}),r)})))()},reply:function(t,e){var s=this;Object(n["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,s.comment.reviewId=t,s.comment.userId=s.id,s.comment.contents=s.$refs.comment[e].value,console.log("리뷰id확인"),console.log(t),console.log("작성자 id확인"),console.log(s.comment.writer),console.log("댓글내용확인"),console.log(s.$refs.comment[e].value),r.next=12,s.$axios.post("".concat(s.url,"/reviews/comments"),s.comment);case 12:a=r.sent,console.log(a),i=a.data,n=i.code,o=i.message,201===n?s.reviewList[e].comments.push(a.data.result):alert(o),r.next=21;break;case 18:r.prev=18,r.t0=r["catch"](0),console.log(r.t0);case 21:case"end":return r.stop()}}),r,null,[[0,18]])})))()}},created:function(){var t=this;Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("".concat(t.url,"/products/").concat(t.$route.params.id));case 3:s=e.sent,console.log(s),t.product=s.data.productInfo,t.reviewList=s.data.reviewInfo,t.reviewListLength=t.reviewList.length,console.log("배열 길이 확인"),console.log(t.reviewListLength),t.review.userId=t.id,console.log(t.product),console.log("detail에서 usreid확인**"),console.log(t.review.userId),console.log("product params확인"),console.log(t.$route.params),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))()},updated:function(){console.log("업데이트")},mounted:function(){},beforeRouteUpdate:function(t,e,s){s(),this.$router.go(t.path)},beforeRouteEnter:function(t,e,s){s()},watch:{"reviewList.length":function(t){return console.log("reviewListLength의 길이 변경됨"),t}},filters:{parent_category:function(t){return 1===t?"영양제":"동물영양제"}},computed:l({},Object(o["d"])(["token","id","url"]),{},Object(o["c"])(["productImagePath","pictogramImagePath"]),{child_category:function(){return 1===this.product.parent_category?1===this.product.child_category?"비타민":"프로바이오틱스":null},productPath:function(){var t="".concat(this.productImagePath,"/").concat(this.product.product_image);return t},pictogramPath:function(){var t="".concat(this.pictogramImagePath);return t}})},u=d,v=(s("88f4"),s("2877")),p=Object(v["a"])(u,r,a,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-6f0098d6.c5ac673a.js.map